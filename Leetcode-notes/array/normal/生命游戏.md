# 题目 - 生命游戏

## 题目描述

根据百度百科，`生命游戏`，是英国数学家约翰·何顿·康威在 1970 年发明的细胞自动机。

给定一个包含`m × n`个格子的面板，每一个格子都可以看成是一个细胞。每个细胞都具有一个初始状态：
* 1 即为活细胞（live），或 0 即为死细胞（dead）。

每个细胞与其八个相邻位置（水平，垂直，对角线）的细胞都遵循以下四条生存定律：
* 如果活细胞周围八个位置的活细胞数少于两个，则该位置活细胞死亡；
* 如果活细胞周围八个位置有两个或三个活细胞，则该位置活细胞仍然存活；
* 如果活细胞周围八个位置有超过三个活细胞，则该位置活细胞死亡；
* 如果死细胞周围正好有三个活细胞，则该位置死细胞复活；

下一个状态是通过将上述规则同时应用于当前状态下的每个细胞所形成的，其中细胞的出生和死亡是同时发生的。给你 m x n 网格面板 board 的当前状态，返回下一个状态。

## 题解


因为循环更新时需要能够读取那些有过更新的格子的原始值，所以最简单的思路就是直接复制整张表的值，然后使用复制表的值作为参考来更新真正的表

但是这样会占用很大的内存，同时也需要一个额外的`m x n`的循环来进行复制。

更高效的思路是，设计一种表示矩阵中元素值的方式，让其能够同时包含更新前和更新后的信息：
* 活的仍然活着：1
* 活的会死：-1
* 死的还是死的：0
* 死的会活：2

```java
class Solution {
    public void gameOfLife(int[][] board) {
        int m = board.length;
        int n = board[0].length;
        
        //初次遍历，更新复合状态
        for(int i=0;i<m;i++){
            for(int j=0;j<n;j++){
                int countLive = countLive(board,i,j);
                
                //对于活着的细胞，如果周围活细胞少于2或大于3，则接下来会死亡，此处记作-1
                if(board[i][j] == 1 && !(countLive == 2 || countLive == 3)) board[i][j] = -1;
                //对于已经死亡的细胞，如果周围活细胞刚好三个，则接下来会活过来,此处记作2
                if(board[i][j] == 0 && countLive == 3) board[i][j] = 2;
            }
        }
        
        //二次遍历，将复合状态重新变为简单状态, 1或2都代表新状态下的活细胞， 0或-1都代表新状态下的死细胞
        for(int i=0;i<m;i++){
            for(int j=0;j<n;j++){
                board[i][j] = board[i][j] > 0? 1: 0;
            }
        }
    }
    
    public int countLive(int[][] board, int i, int j){
        int[] dirs = {-1, 0, 1};
        int m = board.length;
        int n = board[0].length;
        int countLive = 0;
        
        for(int dx : dirs){
            for(int dy: dirs){
                if(dx==0 && dy==0) continue;
                int x = i + dx, y = j + dy;
                if(x < m && x >=0 && y < n && y >=0 
                        && Math.abs(board[x][y]) == 1){
                    //x,y符合边界条件，board[x][y]为1或-1代表当前是活着的细胞
                    countLive++;
                }
            }
        }
        return countLive;
    }
}
```